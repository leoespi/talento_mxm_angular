<h1>Lista de Incapacidades</h1>
<br/>

<div class="container">
  <div class="row">
    <div class="col-sm-4">
      <button type="button" class="btn btn-primary" (click)="downloadIncapacidades()">Descargar Incapacidades</button>
    </div>
    <div class="col-sm-4">
      <input type="month" [(ngModel)]="searchMonth" class="form-control" aria-label="Month Filter">
    </div>
    <div class="col-sm-4">
      <input type="text" [(ngModel)]="searchTerm" class="form-control" placeholder="Buscar por cédula" aria-label="Recipient's username" aria-describedby="basic-addon2">
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12">
      <select [(ngModel)]="tipoIncapacidadSeleccionada" class="form-control">
        <option value="">Seleccionar Tipo de Incapacidad</option>
        <option *ngFor="let tipo of tiposIncapacidad" [value]="tipo">{{ tipo }}</option>
      </select>
    </div>
  </div>
</div>

<div class="scroll-container">
  <table class="table table-bordered table-hover">
    <thead>
      <tr>
        <th>ID</th>
        <th>Cédula</th>
        <th>Nombre</th>
        <th>Tipo de Incapacidad Reportada</th>
        <th>Días de incapacidad</th>
        <th>Fecha inicio incapacidad</th>
        <th>Aplica Cobro</th>
        <th>Entidad Afiliada</th>
        <th>Tipo de Incapacidad Autorizada</th>
        <th>Imagen</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let incapacidad of filtrarIncapacidades()">
        <td>{{ incapacidad.id }}</td>
        <td>{{ incapacidad.user.cedula }}</td>
        <td>{{ incapacidad.user.name }}</td>
        <td>{{incapacidad.tipo_incapacidad_reportada}}</td>
        <td>{{ incapacidad.dias_incapacidad }}</td>
        <td>{{ incapacidad.fecha_inicio_incapacidad }}</td>
        <td>{{ incapacidad.aplica_cobro }}</td>
        <td>{{ incapacidad.entidad_afiliada }}</td>
        <td>{{ incapacidad.tipo_incapacidad }}</td>
        <td>
          <button type="button" class="btn btn-primary" *ngIf="incapacidad.uuid" (click)="visualizarImagen(incapacidad.uuid!)">Visualizar</button>
          <button type="button" class="btn btn-success" *ngIf="incapacidad.uuid" (click)="downloadImage(incapacidad.uuid!)">Descargar</button>
        </td>
        <td>
          <button type="button" class="btn btn-danger" (click)="eliminarFeeds(incapacidad.id)">Eliminar</button>
          <button type="button" class="btn btn-warning" (click)="editarIncapacidades(incapacidad.id)">Autorizar</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
